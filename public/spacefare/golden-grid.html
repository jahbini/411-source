<!DOCTYPE html><base href=/ ><meta content="James A. Hinds: The Celarien's best friend.  I'm not him, I wear glasses" name=author><meta content=text/html charset=UTF-8 http-equiv=Content-Type><meta content="width=device-width,initial-scale=1" name=viewport><title>A Fountainhead of Strategies, techniques and other stuff</title><meta content="Brainstorms, ideas and such" name=description><meta content="brain candy, ideas, strategies, techniques" name=keywords><script>document.styling={palx:"#03c",black:"#000",white:"#fff"}</script><link href=/assets/icons/apple-icon-57x57.png rel=apple-touch-icon sizes=57x57><link href=/assets/icons/apple-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/assets/icons/apple-icon-72x72.png rel=apple-touch-icon sizes=72x72><link href=/assets/icons/apple-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/assets/icons/apple-icon-114x114.png rel=apple-touch-icon sizes=114x114><link href=/assets/icons/apple-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/assets/icons/apple-icon-144x144.png rel=apple-touch-icon sizes=144x144><link href=/assets/icons/apple-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/assets/icons/apple-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/assets/icons/android-icon-192x192.png rel=icon sizes=192x192 type=image/png><link href=/assets/icons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/assets/icons/favicon-96x96.png rel=icon sizes=96x96 type=image/png><link href=/assets/icons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/assets/manifest.json rel=manifest><meta content=#ffffff name=msapplication-TileColor><meta content=/assets/icons/ms-icon-144x144.png name=msapplication-TileImage><meta content=#ffffff name=theme-color><link href=assets/css/vendor.css rel=stylesheet -content--encoding=gzip><link href=assets/css/app.css rel=stylesheet -content--encoding=gzip><link href=assets/icons/favicon.ico rel="shortcut icon" type=image/x-icon><link href=assets/icons/favicon.ico rel=icon type=image/x-icon><script src=allstories.json></script><script src=mystories.json></script><script src=assets/js/vendor.js -content--encoding=gzip -content--type=text/javascript></script><script src=assets/js/app.js -content--encoding=gzip -content--type=text/javascript></script><script>siteHandle="411-source",topDomain="411-source.com",require("initialize")</script><style>#cover{top:0;left:0;position:fixed;background-repeat:no-repeat;background-size:cover;z-index:-1;height:100%;width:100%}</style><script src=assets/seen.min.js></script><div class=fixed style="background:url(/assets/images/hooray-fade2.jpg) no-repeat center fixed;-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;ms-filter:FlipH"></div><div class="bg-transparent container-fluid" id=411-source-body><div class=row><header class="align-items-center d-flex d-row justify-content-around w-100" id=header style=height:250px><div><img class=rounded-circle src="http://www.gravatar.com/avatar/c105eda1978979dfb13059b8878ef95d?s=120" style=-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;ms-filter:FlipH></div><div></div></header></div><div class=row style=min-height:100vh><div class=row><div class="col col-12 col-md-9" id=storybar><div class="bg-silver u-shadow" id=mainline><header class=c-card__header><h2 class="c-heading c-heading--small">golden-grid<div class=c-heading__sub>---</div></h2></header><div class=c-card__body><div class="bg-darken-1 m1"><div class=contents id=bloviation><canvas height=800 id=seen-canvas width=800></canvas><div id=reference></div></div><script>(function() {
  var slice = [].slice,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };
  (() => {
        return $(function() {
          var B, Origin, Paths, Ratios, _, addToLattice, allPaths, badScene, badboy, basis, bigM, bladeScheme, blades, color, colorScheme, context, createEmplace2, dot, dumpText, fillColor, g, height, i, ii, j, k, latticeOrigin, latticePoint, latticePointCollection, latticePoints, len, lx, m, newDot, powers, ref, rho, rhoShow, scene, seenModels, siggy, slope, v;
          try {
            height = 800;
            T = require("halvalla");
            B = require("backbone");
            _ = require("underscore");
            rho = 50 / 1.618033; //set powers[0] to 50
            powers = (function() {
              var j, results;
              results = [];
              for (i = j = 0; j <= 10; i = ++j) {
                results.push(rho = rho * 1.61803398);
              }
              return results;
            })();
            dumpText = function(...text) {
              var j, len, r, t;
              r = "--";
              for (j = 0, len = text.length; j < len; j++) {
                t = text[j];
                if (_.isString(t)) {
                  r += t;
                } else {
                  r += JSON.stringify(t);
                }
                r += " --";
              }
              return $("#reference").append(T.render(T.p(r)));
            };
            rhoShow = T.render(T.div(() => {
              var j;
              for (i = j = 0; j <= 10; i = ++j) {
                T.p(`rho^${i}=${powers[i]}. `);
              }
              return null;
            }));
            //$("#reference").append rhoShow
            Ratios = [2, 1, 0, -1];
            colorScheme = ['#e6194B', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#42d4f4', '#f032e6', '#bfef45', '#fabed4', '#469990', '#dcbeff', '#9A6324', '#fffac8', '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#a9a9a9', '#ffffff', '#000000'];
            blades = {};
            ref = ["groucho", "harpo", "chico", "stan", "babe"];
            for (i = j = 0, len = ref.length; j < len; i = ++j) {
              basis = ref[i];
              color = seen.Colors.hex(colorScheme[i]);
              color.a = 140;
              slope = i * 2 * Math.PI / 5;
              blades[basis] = {
                angle: i * 72,
                slope: slope,
                points: (function() {
                  var len1, m, results;
                  results = [];
                  for (k = m = 0, len1 = powers.length; m < len1; k = ++m) {
                    v = powers[k];
                    results.push(new seen.P().transform(new seen.Matrix().translate(v).rotz(slope)));
                  }
                  return results;
                })(),
                color: color
              };
            }
            fillColor = seen.Colors.rgb(255, 5, 5);
            newDot = function(theColor = fillColor, text = "origin") {
              var shape;
              //shape = seen.Shapes.text(text, {font: '10px Roboto', cullBackfaces: false, anchor: 'left'}).fill('#000000')
              shape = new seen.Shape('tri', [new seen.Surface([seen.P(-1, -1, 0), seen.P(1, -1, 0), seen.P(0, 4, 0)])]);
              return shape.fill(new seen.Material(theColor)).scale(5);
            };
            latticePoint = B.Model.extend();
            latticePointCollection = B.Collection.extend({
              model: latticePoint
            });
            latticePoints = new latticePointCollection();
            addToLattice = function(who, where, what, parent) {
              var badboy, pointFinal, sig;
              try {
                pointFinal = seen.P(0, 0, 0).transform(what.m).round();
                if (!(1000 > pointFinal.magnitude())) {
                  return null;
                }
                sig = siggy(parent, who, where);
                //dumpText "lattice sig", sig, who,parent
                return latticePoints.add({
                  id: what.surfaces[0].id,
                  blade: who,
                  offset: where,
                  pointFinal: pointFinal,
                  signature: sig
                });
              } catch (error) {
                badboy = error;
                return alert("233 " + badboy);
              }
            };
            latticeOrigin = new latticePoint({
              id: "o0",
              blade: "origin",
              offset: 0,
              pointFinal: seen.P(0, 0, 0),
              signature: "_"
            });
            //latticePoints.add latticeOrigin
            dot = null;
            seenModels = new seen.Models.default();
            bladeScheme = ["groucho", "harpo", "chico", "stan", "babe", "groucho", "chico", "babe", "harpo", "stan", "groucho"];
            Paths = class Paths {
              // local p accumulates all Paths to a specific vertex from the origin
              constructor() {
                this.p = {};
              }

              addPath(v, data) {
                var bladesInPath, path, t;
                bladesInPath = t = data.split('/');
                path = _.sortBy(t, function(d) {
                  return d;
                });
                data = path.join('/');
                if (!this.p[v.x]) {
                  this.p[v.x] = {};
                }
                //dumpText JSON.stringify v
                //dumpText data
                if (!(t = this.p[v.x][v.y])) {
                  this.p[v.x][v.y] = [data];
                  return true;
                }
                //return false unless -1 == _.indexOf t, data
                //# this adds more links to vertex lets just try the first in the class
                //t.unshift data
                return true;
              }

              mostPaths() {
                var byXY, byY, max, ref1, x, y;
                max = [];
                ref1 = this.p;
                for (x in ref1) {
                  byY = ref1[x];
                  for (y in byY) {
                    byXY = byY[y];
                    if (byXY.length > max.length) {
                      max.push(byXY);
                    }
                  }
                }
                return {
                  x: x,
                  y: y,
                  max: max
                };
              }

            };
            allPaths = new Paths();
            siggy = function(p, blade, wp) {
              return `${p.get("signature")}/${blade}-${blades[blade].angle}.${wp}`;
            };
            Origin = new seen.Shape('tri', [new seen.Surface([seen.P(-1, -1, 0), seen.P(1, -1, 0), seen.P(0, 4, 0)])]);
            Origin.fill(new seen.Material('#880000')).scale(5);
            seenModels.add(Origin);
            createEmplace2 = function(parent = latticeOrigin, inputPower = -1) {
              var blade, blade1, blade2, bladeModel, buildPoint, destination, m, n, o, parent2, pipeIt, results, results1;
              bladeModel = seenModels.append();
              buildPoint = function(blade, thePower, theParent) {
                var b, badboy, bb, signature, x, y, z;
                if (!theParent) {
                  return;
                }
                try {
                  ({x, y, z} = theParent.get("pointFinal"));
                  signature = siggy(theParent, blade, thePower);
                  //dumpText "build",signature
                  b = blades[blade];
                  bb = b.points[thePower];
                  dot = newDot(blades[blade].color, signature).rotz(b.slope).translate(bb.x, bb.y, 0).translate(x, y, z);
                  dot.bake().reset();
                  //dumpText "dot", signature, dot
                  bladeModel.add(dot);
                  if (!allPaths.addPath(seen.P(0, 0, 0).transform(dot.m).round(), signature)) {
                    return null;
                  }
                } catch (error) {
                  badboy = error;
                  alert(badboy);
                }
                return addToLattice(blade, thePower, dot, theParent);
              };
              pipeIt = function(s, d, color) {
                var dp, interpolatePoints, ln1, sp;
                interpolatePoints = function(a, b, t) {
                  return seen.P(a.x * (1.0 - t) + b.x * t, a.y * (1.0 - t) + b.y * t, a.z * (1.0 - t) + b.z * t);
                };
                sp = s.get("pointFinal");
                dp = d.get("pointFinal");
                ln1 = seen.Shapes.pipe(interpolatePoints(sp, dp, .9), interpolatePoints(sp, dp, .2));
                ln1.fill(color);
                return bladeModel.add(ln1);
              };
              if (inputPower >= 0) {
                results = [];
                for (i = m = 0; m <= 4; i = ++m) {
                  blade = bladeScheme[i];
                  //dumpText "spoke",blade,inputPower
                  destination = buildPoint(blade, inputPower, parent);
                  if (!destination) {
                    continue;
                  }
                  //dumpText "destination",destination
                  results.push(pipeIt(parent, destination, colorScheme[inputPower + 5]));
                }
                return results;
              } else {
                for (i = n = 0; n <= 4; i = ++n) {
                  [blade2, blade1] = bladeScheme.slice(i, +(i + 1) + 1 || 9e9);
                  //dumpText "first leg",blade1,blade2
                  parent2 = buildPoint(blade1, 0, parent);
                  if (!parent2) {
                    continue;
                  }
                  //dumpText "parent2", parent2
                  pipeIt(parent, parent2, '#123456');
                  destination = buildPoint(blade2, 0, parent2);
                  if (!destination) {
                    continue;
                  }
                  //dumpText "destination",blade2,destination
                  pipeIt(parent2, destination, '#345612');
                }
                results1 = [];
                for (i = o = 5; o <= 9; i = ++o) {
                  [blade1, blade2] = bladeScheme.slice(i, +(i + 1) + 1 || 9e9);
                  //dumpText blade1+","+blade2
                  parent2 = buildPoint(blade1, 2, parent);
                  //dumpText JSON.stringify parent2
                  pipeIt(parent, parent2, '#456123');
                  if (!parent2) {
                    continue;
                  }
                  destination = buildPoint(blade2, 1, parent2);
                  //dumpText JSON.stringify destination
                  results1.push(pipeIt(parent2, destination, '#5eee23'));
                }
                return results1;
              }
            };
            lx = [[latticeOrigin]];
            try {
            //createEmplace2 lx[0],4
              for (ii = m = 4; m >= 0; ii = --m) {
                lx[0].forEach(function(l) {
                  return createEmplace2(l, ii);
                });
                lx.unshift(latticePoints);
                latticePoints = new latticePointCollection();
              }
            } catch (error) {
              badboy = error;
              alert('123 ' + badboy);
            }
            dumpText("JAH here");
            dumpText(latticePoints.length);
            g = allPaths.mostPaths();
            dumpText("popular destination", g);
            
            //latticePoints.forEach (l)->dumpText l.toJSON()
            //fillColor = seen.Colors.rgb 25,99,188,40
            dumpText("JAH where");
            dumpText("JAH nowhere");
            
            // Create scene and add shape to model
            scene = new seen.Scene({
              model: bigM = seenModels,
              viewport: seen.Viewports.center(height, height),
              camera: new seen.Camera({
                projection: seen.Projections.perspective()
              })
            });
            
            // Create render context from canvas
            context = seen.Context('seen-canvas', scene);
            return context.render();
          } catch (error) {
            
            //dragger = new seen.Drag('seen-canvas', {inertia : true})
            //dragger.on 'drag.rotate', (e) ->
            //  bigM.transform seen.Quaternion.xyToTransform(e.offsetRelative...)
            //  context.render()
            badScene = error;
            return alert("Seenery fail " + badScene);
          }
        });
      })();
})();</script></div></div><footer class=c-card__footer><p class=c-text--quiet>that's all--</footer></div></div><div class="col col-12 col-md-3"><aside id=sidebar style=min-width:240></aside></div><div class="bg-darken-2 flex-auto order-last" id=sidecar style=min-width:240><div class=fb-login-button data-auto-logout-link=true data-button-type=login_with data-max-rows=1 data-show-faces=true data-size=medium data-use-continue-as=true data-width=200 width=200></div><div id=fb-status></div></div></div></div><div class=panel id=footer bg=white><h2>All contents copyright 2015, James A. Hinds</h2></div><div id=cover style=background-image:url(/assets/images/hooray-fade2.jpg);-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;ms-filter:FlipH></div></div>